<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ICD-9 Lookup</title>
<meta name="description" content="Offline-enabled ICD-9 code lookup with search and favorites" />
<meta name="theme-color" content="#1a56db" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="default" />
<meta name="apple-mobile-web-app-title" content="ICD-9 Lookup" />
<link rel="manifest" href="manifest.json" />
<link rel="icon" type="image/png" sizes="192x192" href="assets/icons/icon-192.png" />
<link rel="apple-touch-icon" href="assets/icons/icon-192.png" />
<link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body>
  <!-- Offline indicator -->
  <div id="offline-indicator" class="offline-indicator">
    <span id="offline-text">You're offline - using cached data</span>
  </div>
  
  <!-- Install prompt -->
  <div id="install-prompt" class="install-prompt">
    <div style="display: flex; align-items: center; gap: 12px;">
      <div style="flex: 1;">
        <strong>Install ICD-9 Lookup</strong>
        <div style="font-size: 0.9rem; margin-top: 4px;">Get quick access to ICD-9 codes offline</div>
      </div>
      <button id="install-btn">Install</button>
      <button id="install-close" class="close">×</button>
    </div>
  </div>

  <header>
    <h1><img src="assets/icons/icon-96.png" alt="ICD-9 Lookup" /></h1>
    <span class="pill admin-only" id="pill-count">0 codes</span>
    <span class="pill admin-only" id="pill-source">source: —</span>
    <label class="admin-toggle">
      <input type="checkbox" id="admin-checkbox" />
      <span>show admin</span>
    </label>
  </header>

  <div class="controls">
    <input id="q" type="text" placeholder="Search by code, name, or synonyms… (e.g., 296.20, depression, cholera)" autocomplete="off" />
    <button class="admin-only" id="btn-refresh" title="Fetch icd9.json and update cache">Refresh dataset</button>
    <button class="admin-only" id="btn-clear" title="Clear cached dataset">Clear cache</button>
    <button class="admin-only" id="btn-export" title="Download current dataset JSON from cache">Export JSON</button>
  </div>

  <div id="meta" class="admin-only">
    <span>Cache: <strong id="cache-state" class="muted">checking…</strong></span>
    <span>Version: <code id="cache-version">—</code></span>
    <span>Updated: <span id="cache-updated" class="muted">—</span></span>
  </div>

  <!-- FAVOURITES (pinned to the top) -->
  <section id="favWrap" class="hidden">
    <h2>Favourites <span class="muted" id="favCount">(0)</span></h2>
    <div id="favs" class="grid"></div>
  </section>

  <!-- RESULTS (below favourites) -->
  <section>
    <h2 id="resTitle">Results</h2>
    <div id="results" class="grid"></div>
  </section>

  <!-- Fuse.js for fuzzy search -->
  <script src="assets/js/fuse.min.js"></script>
  <!-- Main application JavaScript -->
  <script src="assets/js/app.js"></script>
</body>
</html>
